<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>CodeREAD Report for {{ code }}</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 2rem auto; line-height: 1.5; }
        h1, h2 { color: #222; }
        a { color: #ffd700; text-decoration: none; }
        a:hover { text-decoration: underline; }
        section { margin-bottom: 2rem; }
        ul { list-style: none; padding-left: 0; }
        ul li { margin-bottom: 0.5rem; }
        .mechanics li { margin-bottom: 1rem; }
    </style>
</head>
<body>
    <h1>CodeREAD Diagnostic Report for <code>{{ code }}</code></h1>

    <section>
        <h2>1. Code Overview (Layman’s Terms)</h2>
        <p>{{ report.layman.text }}</p>
        {% if report.layman.video %}
        <p>Watch the explanation: <a href="{{ report.layman.video }}" target="_blank">YouTube Video</a></p>
        {% endif %}
    </section>

    <section>
        <h2>2. Technical Explanation</h2>
        <p>{{ report.technical }}</p>
    </section>

    <section>
        <h2>3. Consequences of Ignoring It</h2>
        <p>{{ report.consequences }}</p>
    </section>

    <section>
        <h2>4. Repair Cost Range</h2>
        <ul>
            <li><strong>Parts:</strong> {{ report.cost.parts or "N/A" }}</li>
            <li><strong>Labor:</strong> {{ report.cost.labor or "N/A" }}</li>
            <li><strong>Total (Shop):</strong> {{ report.cost.total_shop or "N/A" }}</li>
            <li><strong>Total (DIY):</strong> {{ report.cost.total_diy or "N/A" }}</li>
        </ul>
    </section>

    <section>
        <h2>5. Environmental Impact</h2>
        <p>{{ report.environmental }}</p>
    </section>

    <section>
        <h2>6. Preventative Characteristics</h2>
        <p>{{ report.prevention }}</p>
    </section>

    <section>
        <h2>7. DIY Potential</h2>
        <p>Difficulty Level: <strong>{{ report.diy.level }}</strong></p>
        {% if report.diy.video %}
        <p>DIY Repair Video: <a href="{{ report.diy.video }}" target="_blank">Watch Here</a></p>
        {% endif %}
    </section>

    <section>
        <h2>8. Parts Needed</h2>
        <ul>
            {% for part in report.parts_needed %}
            <li>{{ part.name }} — {{ part.price }}</li>
            {% else %}
            <li>No parts information available.</li>
            {% endfor %}
        </ul>
    </section>

    <section>
        <h2>9. Local Mechanic Recommendations</h2>
        {% if mechanics %}
        <ul class="mechanics">
            {% for m in mechanics %}
            <li>
                <strong>{{ m.name }}</strong><br/>
                {{ m.address }}<br/>
                Phone: <a href="tel:{{ m.phone }}">{{ m.phone }}</a>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No local mechanics found for your city.</p>
        {% endif %}
    </section>

    <p><a href="/">← Back to form</a></p>
</body>
</html>
